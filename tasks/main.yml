---
- name: GENERAL | Get latest verion from github
  github_release:
    user: "{{ gh_user }}"
    repo: "{{ gh_repo }}"
    action: latest_release
  when: bat_version == ''
  register: bat_version

- name: GENERAL | Set URLs to download bins
  set_fact:
    debian_url: "{{ gh_repo_url }}/releases/download/v{{ bat_version }}/bat_{{ bat_version }}_amd64.deb"
    arm_url: "{{ gh_repo_url }}/releases/download/v{{ bat_version }}/bat-v{{ bat_version }}-arm-unknown-linux-gnueabihf.tar.gz"

- import_tasks: debian.yml
  when: ansible_os_family == 'Debian'

- import_tasks: arch.yml
  when: ansible_distribution == 'ArchLinux'

- import_tasks: void.yml
  when: ansible_distribution == 'VoidLinux'

- import_tasks: freebsd.yml
  when: ansible_distribution == 'FreeBSD'

- import_tasks: macos.yml
  when: ansible_distribution == 'MacOS'

- import_tasks: arm.yml
  when: ansible_architecture == 'arm'
